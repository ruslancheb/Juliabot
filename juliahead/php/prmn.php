<?php//Создание новой переменнойif($тип_перем==0){$пере[$knp]['typ']=0;$пере[$knp]['ima']=substr($f,0,$prep-1);}elseif($тип_перем==1){$пере[$knp]['typ']=1;$пере[$knp]['ima']=substr($f,0,$prep-1);}elseif($тип_перем==2)//"{$ima=substr($f,1,$prep-3);//Убираем экранирующий символ$ima = str_replace('\\r',0x0D,$ima);$ima = str_replace('\\t',0x09,$ima);$ima = str_replace('\\n',0x0A,$ima);if(strpos($ima,'\\x')!==false){#while(strpos($ima,'\\x')!==false)#{//$ima_vr=$ima;//$hk=substr($ima_vr,strpos($ima_vr,'\\x')+2,2);//$ima=str_replace('\\x',"\x$hk",$ima);#}}//Убираем экранирующий символ$ima = str_replace('\\','',substr($f,1,$prep-3)); if(strpos($ima,'$')!==false){test(1);//1)Создание функции и её парметров//while(strpos($ima,'$')!==false)//{//}//2)Создание выходной переменной и её названия//3)Перемена местами функций//4)Изменения массива переменных//5)Изменения массива связей//5)Упрощение и удаление массива $пере,$связ}if(strpos($ima,'{')!==false){}else{}$пере[$knp]['typ']=2;$пере[$knp]['ima']=$ima;}elseif($тип_перем==3)//'{$ima=substr($f,1,$prep-3);$ima = str_replace('\\','',$ima); $пере[$knp]['typ']=3;$пере[$knp]['ima']=$ima;}elseif($тип_перем==4)//HEREDOC{}$пере[$knp]['nmf']=$n;$пере[$knp]['nmp']=$нмп;$переменные[$n][$нмп][0]=$пере[$knp]['ima'];$переменные[$n][$нмп][1]=$пере[$knp]['typ'];//Если переменная найдена в списке имён переменных,тоfor ($i=$knp-1;$i>0;$i--) {//Для поиска связей между функциями.Если найдена переменная с таким же именем взадиif($пере[$knp]['ima']==$пере[$i]['ima'] and $пере[$knp]['typ']==$пере[$i]['typ'] and $пере[$knp]['nmp']==1){//Добавление в массив связей новой связи$связ[$kl]['nf1']=$пере[$knp]['nmf'];$связ[$kl]['np1']=$пере[$knp]['nmp'];$связ[$kl]['nf2']=$пере[$i]['nmf'];$связ[$kl]['np2']=$пере[$i]['nmp'];$kl++;//Нужно чтобы по нф,нп,нт я мог найти номер номер свзяной функции$связи[$n][$нмп][0]=$пере[$i]['nmf'];$связи[$n][$нмп][1]=$пере[$i]['nmp'];break;};}$knp++;$тип_перем=0;?>